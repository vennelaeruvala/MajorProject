<% layout("/layouts/boilerplate.ejs") %>
<style>
    a{
        text-decoration: none !important;
        color: black !important;
    }
    #filters{
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        margin-bottom: 1rem;
        margin-top: 1rem;
    }
    .filter{
        text-align: center;
        opacity: 0.7;
        margin-top : 1rem;
        margin-right: 2rem;
        cursor: pointer;
    }
    .filter:hover{
        opacity: 1;
    }
    .filter p {
        font-size: 15px;
    }
    .tax-toggle{
        border : 1px solid black;
        border-radius: 1rem;
        height: 3.25rem;
        padding: 1rem;
        margin-left:0rem;
        display: flex;
        align-items: center;
        
    }
    @media screen and (max-width: 1200px) {
        .hide1{
        display: none;
       }
    }
    @media screen and (max-width: 1100px)  {
       .hide2{
        display: none;
       }
    }
    @media screen and (max-width: 1000px) {
       .hide3{
        display: none;
       }
    }
    @media screen and (max-width: 900px){
       .hide4{
        display: none;
       }
    }
    .tax-info{
        display:none;
    }
</style>
<body>
    <div id="filters">
        <div class="filter">
            <a href="/listings/trendings">
                <div><i class="fa-solid fa-fire"></i></i></div>
                <p>Trending</p>
            </a>
        </div>
        <div class="filter">
            <a href="/listings/rooms">
                <div><i class="fa-solid fa-bed"></i></div>
                <p>Rooms</p>
            </a>
        </div>
        <div class="filter">
            <a href="/listings/cities">
                <div><i class="fa-solid fa-city"></i></i></div>
                <p>Iconic Cities</p>
            </a>
        </div>
        <div class="filter">
            <a href="/listings/mountains">
                <div><i class="fa-solid fa-mountain"></i></i></div>
                <p>Mountains</p>
            </a>
        </div>
        <div class="filter">
            <a href="/listings/castles">
                <div><i class="fa-brands fa-fort-awesome"></i></div>
                <p>Castles</p>
            </a>
        </div>
        <div class="filter hide4">
            <a href="/listings/pools">
                <div><i class="fa-solid fa-person-drowning"></i></i></div>
                <p>Amazing Pools</p>
            </a>
        </div>
        <div class="filter hide3">
            <a href="/listings/camping">
                <div><i class="fa-solid fa-campground"></i></div>
                <p>Camping</p>
            </a>
        </div>
        <div class="filter hide2">
            <a href="/listings/farms">
                <div><i class="fa-solid fa-cow"></i></div>
                <p>Farms</p>
            </a>
        </div>
        <div class="filter hide1">
            <a href="/listings/arctic">
                <div><i class="fa-solid fa-snowflake"></i></div>
                <p>Arctic</p>
            </a>
        </div>
        <div class="filter hide1">
            <a href="/listings/boats">
                <div><i class="fa-solid fa-sailboat"></i></i></div>
                <p>Boats</p>
            </a>
        </div>
        <div class="filter hide1">
            <a href="/listings/beach">
                <div><i class="fa-solid fa-umbrella-beach"></i></div>
                <p>Beach</p>
            </a>
        </div>
        <div class="tax-toggle">
        <div class="form-check form-switch form-check-reverse">
            <input class="form-check-input" type="checkbox" id="taxSwitch">
            <label class="form-check-label" for="flexSwitchCheckReverse">Display total after taxes</label>
          </div>
        </div>
    </div>
        <div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1">
            <% for (let listing of allListings){ %>
                <a href="listings/<%= listing._id %>" class="listing-link">
                    <div class=" card col listing-card">
                        <img src="<%= listing.image.url %>" 
                            class="card-img-top" alt="listing_image"
                            style="width: 100% ;height: 20rem;" 
                            required>
                        <div class="card-img-overlay"></div>
                        <div class="card-body">
                          <p class="card-text">
                            <b><%= listing.title %></b><br>
                            &#8377; <%= listing.price.toLocaleString("en-IN") %>
                                <i class="tax-info">&nbsp; &nbsp; +18% GST</i>
                          </p>
                        </div>
                    </div>
                </a>
            <% } %>
        </div>
</body>
<script>
    let taxSwitch = document.getElementById("taxSwitch");
    taxSwitch.addEventListener("click",()=>{
        let taxInfo = document.getElementsByClassName("tax-info");
        for(info of taxInfo){
            if(info.style.display!="inline"){
            info.style.display = "inline"
        }
        else{
            info.style.display="none";
        }
        }
    })
</script>
